{
  "version": 3,
  "file": "main.js",
  "sourceRoot": "",
  "sources": [
    "main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "currencies =\n  btc: new BTC()\n  eth: new ETH()\n  ltc: new LTC()\n  xrb: new XRB()\nprices = {}\nlanes = {}\nstats = {}\n\n# render TX\nshowTx = (currency, tx) ->\n  value = tx.amount*prices[currency]\n  fee = tx.fee*prices[currency]\n\n  lanes[currency].addMeteor\n    speed: if fee then 2 + 4 * Math.min(2, Math.log10(1+fee))/2 else 6\n    hue: if value then 220 - 220 * Math.min(6, Math.log10(1+value))/6 else 220\n    thickness: Math.max(5, Math.log10(1+value) * 10)\n    length: Math.min(3, Math.log10(1 + fee))/3 * 250\n    link: tx.link\n\n  updateStats currency, value, fee\n\n# render block\nshowBlock = (currency) ->\n  lanes[currency].addBlock()\n\n# get current price\nupdatePrices = (currencies) ->\n  currencyAPI = 'https://min-api.cryptocompare.com/data/price?fsym=USD&tsyms='\n  $.get currencyAPI + currencies.join(',').toUpperCase(), (data) ->\n    if data\n      for currency, price of data\n        currency = currency.toLowerCase()\n        prices[currency] = Math.round(1/price*100)/100\n        $(\".#{currency} .price\").text prices[currency].toLocaleString(undefined, { style: 'currency', currency: 'USD' })\n\n  setTimeout updatePrices.bind(null, currencies), 10*1000\n\n# update stats for a currency, called whenever there is a new TX\n# to do that, keep a log of the last 60 seconds of tx\nupdateStats = (currency, value = 0, fee = 0) ->\n  stats[currency] = [] unless stats[currency]?\n  stat = stats[currency]\n  timestamp = new Date().getTime()\n  stat.push {timestamp, value, fee}\n  i = stat.length\n  stat.splice(i, 1) while i-- when timestamp - stat[i].timestamp > 60*1000\n  duration = Math.max(stat[stat.length - 1].timestamp - stat[0].timestamp, 1) / 1000\n  txPerSecond = Math.round(stat.length / duration * 10)/10\n  #valuePerSecond = Math.round(stat.reduce(((a, b) -> a + b.value), 0) / duration)\n  valuePerTx = Math.round(stat.reduce(((a, b) -> a + b.value), 0) / stat.length)\n  #feePerSecond = Math.round(stat.reduce(((a, b) -> a + b.fee), 0) / duration * 100)/100\n  feePerTx = Math.round(stat.reduce(((a, b) -> a + b.fee), 0) / stat.length * 100)/100\n  $(\".#{currency} .stats\").text \"\"\"\n    #{txPerSecond.toLocaleString()} tx/s\n    #{valuePerTx.toLocaleString(undefined, { style: 'currency', minimumFractionDigits: 0, maximumFractionDigits:0, currency: 'USD' })} value/tx\n    #{feePerTx.toLocaleString(undefined, { style: 'currency', currency: 'USD' })} fee/tx\n  \"\"\"\n\n# start everything\n$ ->\n  updatePrices Object.keys(currencies)\n  $('.currencies > div').each ->\n    currency = $(@).attr 'class'\n    if currencies[currency]?\n      currencies[currency].start showTx.bind(null, currency), showBlock.bind(null, currency)\n      canvas = $ '<canvas></canvas>'\n      $('.'+currency).append canvas\n      lanes[currency] = new CanvasRenderer canvas.get(0)"
  ]
}